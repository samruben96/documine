# Epic 9: One-Pager Generation

**Status:** Ready for Development
**Created:** 2025-12-03
**Tech Spec:** [tech-spec-epic-9](../sprint-artifacts/epics/epic-9/tech-spec/)

---

## Epic Goal

Enable insurance agents to instantly generate professional, branded one-pager PDFs from their document analysis and quote comparisons. This transforms docuMINE from a back-office tool into a client-facing productivity multiplier - agents can analyze documents and immediately share polished summaries without manual formatting.

---

## Epic Scope

### In Scope

1. **Agency Branding Management** - Admin-configurable branding (logo, colors, contact info) used across all agency outputs
2. **Dashboard Page** - Central hub showing all tools with agency welcome message
3. **One-Pager Page** - Dedicated generation page with multiple entry points and live preview
4. **PDF Template** - Professional @react-pdf/renderer document with branding
5. **Entry Point Buttons** - Quick access from comparison results, history, and document viewer
6. **Testing & Polish** - Comprehensive test coverage for all flows

### Out of Scope

- CRM integration for client data auto-population
- Multiple template variants (premium, summary, detailed)
- Email direct-send from app
- Digital signature integration
- Custom branding per comparison (always uses agency branding)

---

## Success Criteria

1. [ ] Admin can configure agency branding (logo, colors, contact info)
2. [ ] All agency members see agency-branded one-pagers
3. [ ] Users can generate one-pager from comparison results, history, or document viewer
4. [ ] One-pager page shows live preview as user enters client info
5. [ ] Generated PDF is professional and fits on single page (US Letter)
6. [ ] Dashboard provides clear navigation to all docuMINE tools
7. [ ] All entry points work correctly and pre-populate data

---

## Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| @react-pdf/renderer | Library | Installed (4.3.1) |
| Epic 7 Comparison Infrastructure | Feature | Complete |
| Supabase Storage | Service | Configured |
| file-saver | Library | Installed (2.0.5) |

---

## Story Map

```
Epic 9: One-Pager Generation (13 points)
│
├── Story 9.1: Agency Branding (3 points)
│   └── Foundation - branding data model + admin UI
│
├── Story 9.2: Dashboard Page (2 points)
│   └── Tool hub with agency welcome
│
├── Story 9.3: One-Pager Page (3 points)
│   └── Core generation page with 3 entry points
│   └── Depends on: 9.1 (branding)
│
├── Story 9.4: PDF Template (3 points)
│   └── @react-pdf/renderer document structure
│   └── Depends on: 9.1 (branding), 9.3 (page)
│
├── Story 9.5: Entry Point Buttons (1 point)
│   └── Buttons on compare, docs, history pages
│   └── Depends on: 9.3 (page exists to navigate to)
│
└── Story 9.6: Testing & Polish (1 point)
    └── Unit, component, E2E tests
    └── Depends on: All previous stories
```

---

## Story Summaries

| Story | Title | Points | Dependencies |
|-------|-------|--------|--------------|
| 9.1 | Agency Branding | 3 | None |
| 9.2 | Dashboard Page | 2 | None |
| 9.3 | One-Pager Page | 3 | 9.1 |
| 9.4 | PDF Template | 3 | 9.1, 9.3 |
| 9.5 | Entry Point Buttons | 1 | 9.3 |
| 9.6 | Testing & Polish | 1 | 9.1-9.5 |

**Total Points:** 13
**Recommended Implementation Order:** 9.1 → 9.2 → 9.3 → 9.4 → 9.5 → 9.6

---

## Implementation Sequence

### Phase 1: Foundation (Stories 9.1, 9.2)
- Create branding data model and admin settings
- Create dashboard page with tool cards
- Can be developed in parallel

### Phase 2: Core Feature (Stories 9.3, 9.4)
- Build one-pager page with form and preview
- Create PDF template with branding
- Sequential - page before template

### Phase 3: Integration (Story 9.5)
- Add entry point buttons across app
- Requires one-pager page to exist

### Phase 4: Quality (Story 9.6)
- Comprehensive testing
- Visual polish
- Requires all features complete

---

## Technical Notes

- **PDF Generation:** Uses @react-pdf/renderer (proven in Story 7.6)
- **Branding Storage:** New columns in `agencies` table
- **Logo Storage:** Supabase Storage `branding/` bucket
- **Entry Points:** Query params (`?comparisonId=` or `?documentId=`)
- **Preview:** Real-time PDF preview as user types

---

*Generated by BMAD Tech-Spec Workflow*
*Date: 2025-12-03*
