# Test Strategy Summary

## Test Levels

| Level | Scope | Framework | Coverage |
|-------|-------|-----------|----------|
| Unit | Validation schemas, role checks | Vitest | All validation rules |
| Integration | Team operations, invitation flow | Vitest + Supabase local | Full CRUD flows |
| E2E | Complete invite-to-join journey | Playwright (post-MVP) | Critical paths |

## Key Test Scenarios

**Agency Settings:**
- Admin can update agency name
- Member cannot update agency name
- Name validation (2-100 chars)

**Invitations:**
- Admin can invite user under seat limit
- Invitation blocked at seat limit
- Duplicate email rejected
- Invitation email contains correct link
- Accept invitation joins correct agency
- Expired invitation shows error
- Cancel removes invitation

**Team Management:**
- Admin can remove member
- Cannot remove self
- Cannot remove last admin
- Role change updates database
- Member sees view-only team list

**Billing (Display-Only):**
- Billing tab displays current tier and seat usage
- Plan features summary displays correctly
- "Contact support" message visible
- Manual tier change updates database (admin only)

## Definition of Done

- [ ] All acceptance criteria verified
- [ ] TypeScript compiles without errors
- [ ] Build succeeds (`npm run build`)
- [ ] Unit tests pass for validation schemas (use Zod `.issues` pattern)
- [ ] Integration tests pass for team operations
- [ ] `auth.admin.inviteUserByEmail()` tested with real Supabase
- [ ] Manual testing of all 5 stories complete
- [ ] Code reviewed and merged
- [ ] No new environment variables needed (per Epic 2 retro simplifications)

---

_Generated by BMAD Epic Tech Context Workflow_
_Date: 2025-11-28_
