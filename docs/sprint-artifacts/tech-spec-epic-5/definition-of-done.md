# Definition of Done

## Story-Level DoD

- [ ] All acceptance criteria verified and passing
- [ ] TypeScript compiles without errors (`npm run build` succeeds)
- [ ] Unit tests written for new utility functions (Vitest)
- [ ] Integration tests for chat API endpoint
- [ ] Component tests for chat panel interactions
- [ ] No console errors in browser during manual testing
- [ ] Responsive design verified at desktop, tablet, mobile breakpoints
- [ ] Loading states use skeleton/shimmer (no spinners > 200ms)
- [ ] Error states display user-friendly messages
- [ ] Code reviewed and approved
- [ ] Merged to main branch

## Epic-Level DoD

- [ ] All 10 stories complete and passing DoD (5.1-5.7 MVP + 5.8-5.10 optimization)
- [ ] All acceptance criteria verified (66 for MVP stories + additional for 5.8-5.10)
- [ ] New dependencies installed (react-pdf, pdfjs-dist)
- [ ] PDF.js worker configured in next.config.ts
- [ ] End-to-end chat flow tested with real insurance PDF
- [ ] Streaming response verified (text appears word-by-word)
- [ ] Confidence badges display correctly (all 3 levels)
- [ ] Source citation highlights working (scroll + fade)
- [ ] Conversation history persists across sessions
- [ ] Mobile tabbed interface functional
- [ ] Cross-agency isolation verified (cannot see other agency chats)
- [ ] Build succeeds (`npm run build`)
- [ ] All tests pass (`npm run test`)
- [ ] Sprint status updated to reflect epic completion

## FR Coverage Verification

| FR | Description | Stories | Status |
|----|-------------|---------|--------|
| FR13 | Natural language Q&A | 5.1, 5.2 | ◯ |
| FR14 | Extract answers from documents | 5.3 | ◯ |
| FR15 | Source citations on answers | 5.4 | ◯ |
| FR16 | Confidence indicators | 5.3 | ◯ |
| FR17 | Click-to-view source in document | 5.5 | ◯ |
| FR18 | Follow-up questions (conversation) | 5.6 | ◯ |
| FR19 | Clear "not found" responses | 5.3 | ◯ |
| FR32 | Responsive design | 5.7 | ◯ |
| FR34 | Clear error messages | 5.3 | ◯ |

---

_Generated by BMAD Epic Tech Context Workflow_
_Date: 2025-11-30_
_With contributions from: Winston (Architect), Mary (Analyst), John (PM), Sally (UX), Amelia (Dev), Bob (SM), Murat (TEA), Paige (Tech Writer)_
