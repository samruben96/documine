# Test Strategy Summary

## Test Levels

| Level | Scope | Framework | Coverage |
|-------|-------|-----------|----------|
| Unit | Utility functions, error classes | Jest/Vitest | Error handling, logging, storage utils |
| Integration | Database operations, RLS | Supabase local | All CRUD operations, policy enforcement |
| E2E | Route protection, auth flow | Playwright (post-MVP) | Critical paths |

## Key Test Scenarios

**Database & RLS:**
- Create agency with users, verify isolation
- Attempt cross-tenant document access, verify blocked
- Insert vector data, verify similarity search works

**Client Configuration:**
- Browser client connects and queries
- Server client handles authenticated requests
- Middleware redirects unauthenticated users

**Storage:**
- Upload PDF within size limit
- Reject non-PDF files
- Verify signed URL expiration

**Error Handling:**
- API returns consistent error format
- Logger outputs valid JSON
- Error boundaries catch and display recovery UI

## Definition of Done

- [ ] All acceptance criteria verified
- [ ] TypeScript compiles without errors
- [ ] Build succeeds (`npm run build`)
- [ ] Local development environment works (`npm run dev`)
- [ ] Migrations apply cleanly
- [ ] RLS policies tested manually
- [ ] Code reviewed and merged
- [ ] Documentation updated

---

_Generated by BMAD Epic Tech Context Workflow_
_Date: 2025-11-24_
