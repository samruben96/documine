<story-context id="DR-5-button-standardization" v="1.0">
  <metadata>
    <epicId>design-refresh</epicId>
    <storyId>DR.5</storyId>
    <title>Button Style Standardization</title>
    <status>draft</status>
    <generatedAt>2025-12-10</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/epics/epic-design-refresh/stories/DR-5-button-standardization/story.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>docuMINE user</asA>
    <iWant>consistent button styling across all features</iWant>
    <soThat>the interface feels unified and interactions are predictable</soThat>
    <tasks>
      <task id="1" name="Audit current button component and usages">
        <subtask>1.1 Review src/components/ui/button.tsx current implementation</subtask>
        <subtask>1.2 Document current styling: border-radius, padding, hover states</subtask>
        <subtask>1.3 Identify all button variant usages across codebase</subtask>
        <subtask>1.4 List components using Button: Header, Sidebar, Dialogs, Forms, Cards</subtask>
        <subtask>1.5 Document custom button overrides (className additions)</subtask>
      </task>
      <task id="2" name="Update Button component base styles">
        <subtask>2.1 Update base border-radius from rounded-md to rounded-lg</subtask>
        <subtask>2.2 Update transition-all to transition-colors</subtask>
        <subtask>2.3 Update default variant to use explicit hover:bg-primary/90</subtask>
        <subtask>2.4 Ensure text-sm font-medium is in base classes</subtask>
        <subtask>2.5 Update size variants to use rounded-lg instead of rounded-md</subtask>
      </task>
      <task id="3" name="Update secondary variant">
        <subtask>3.1 Change to: border border-slate-200 bg-white text-slate-700 hover:bg-slate-50</subtask>
        <subtask>3.2 Add dark mode: dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300 dark:hover:bg-slate-800</subtask>
        <subtask>3.3 Remove current bg-secondary text-secondary-foreground</subtask>
      </task>
      <task id="4" name="Update outline variant for consistency" />
      <task id="5" name="Update icon button sizes" />
      <task id="6" name="Update ghost variant" />
      <task id="7" name="Audit Header buttons" />
      <task id="8" name="Audit Dialog/Modal buttons" />
      <task id="9" name="Audit Form buttons" />
      <task id="10" name="Audit Card action buttons" />
      <task id="11" name="Write unit tests for Button component" />
      <task id="12" name="Write E2E visual tests" />
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="DR.5.1">Primary buttons: bg-primary hover:bg-primary/90 text-white rounded-lg</criterion>
    <criterion id="DR.5.2">Secondary buttons: border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-lg</criterion>
    <criterion id="DR.5.3">All buttons use px-4 py-2 text-sm font-medium</criterion>
    <criterion id="DR.5.4">Icon buttons use p-2 rounded-lg (or rounded-full for circular)</criterion>
    <criterion id="DR.5.5">All buttons include transition-colors for smooth hover</criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/sprint-artifacts/epics/epic-design-refresh/tech-spec.md</path>
        <title>Epic Technical Specification: docuMINE Design Refresh</title>
        <section>DR.5 - Button Standardization (lines 419-427)</section>
        <snippet>Primary buttons: bg-primary hover:bg-primary-hover text-white rounded-lg. Secondary buttons: border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-lg. All buttons use px-4 py-2 text-sm font-medium.</snippet>
      </doc>
      <doc>
        <path>docs/features/quoting/mockups/quoting-mockup.html</path>
        <title>Quoting Helper Interactive Mockup</title>
        <section>Button styling patterns (lines 163, 389-400)</section>
        <snippet>Design reference showing rounded-lg buttons with hover:bg-slate-100 ghost buttons and bg-primary primary buttons.</snippet>
      </doc>
      <doc>
        <path>docs/ux-design-specification/6-component-library.md</path>
        <title>Component Library</title>
        <section>6.1 Component Strategy</section>
        <snippet>Standard Components (Use As-Is): Button, Input, Textarea. Base: shadcn/ui components (40+ accessible components).</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/epics/epic-design-refresh/stories/DR-4-card-border-consistency/story.md</path>
        <title>Story DR.4: Card &amp; Border Consistency (Done)</title>
        <section>Completion Notes</section>
        <snippet>Testing approach: 21 unit tests + 8 E2E tests. Pattern established for explicit colors (border-slate-200) instead of theme variables.</snippet>
      </doc>
    </docs>
    <code>
      <file>
        <path>src/components/ui/button.tsx</path>
        <kind>ui-component</kind>
        <symbol>buttonVariants, Button</symbol>
        <lines>1-61</lines>
        <reason>Primary target: Button component with CVA variants to update (rounded-md→rounded-lg, transition-all→transition-colors, secondary/ghost variants)</reason>
      </file>
      <file>
        <path>src/components/layout/header.tsx</path>
        <kind>layout-component</kind>
        <symbol>Header</symbol>
        <lines>78-99</lines>
        <reason>Uses Button with ghost variant and size="icon" for bell and avatar. Verifies icon button styling with className="rounded-full".</reason>
      </file>
      <file>
        <path>src/components/ui/alert-dialog.tsx</path>
        <kind>ui-component</kind>
        <symbol>AlertDialogAction, AlertDialogCancel</symbol>
        <reason>Dialog buttons pattern - uses buttonVariants for action/cancel buttons</reason>
      </file>
      <file>
        <path>src/components/dashboard/tool-card.tsx</path>
        <kind>feature-component</kind>
        <symbol>ToolCard</symbol>
        <reason>Card CTA buttons - verifies primary button usage in cards</reason>
      </file>
      <file>
        <path>src/components/documents/document-card.tsx</path>
        <kind>feature-component</kind>
        <symbol>DocumentCard</symbol>
        <reason>Icon action buttons in cards - delete, download actions</reason>
      </file>
      <file>
        <path>src/components/settings/branding-form.tsx</path>
        <kind>feature-component</kind>
        <symbol>BrandingForm</symbol>
        <reason>Form submit buttons pattern - Save/Cancel button pairs</reason>
      </file>
    </code>
    <dependencies>
      <ecosystem name="node">
        <package name="class-variance-authority" version="^0.7.1" purpose="Button variants via CVA" />
        <package name="tailwind-merge" version="^3.4.0" purpose="className utilities for merging Tailwind classes" />
        <package name="clsx" version="^2.1.1" purpose="Conditional className construction" />
        <package name="lucide-react" version="^0.554.0" purpose="Icons used in icon buttons" />
        <package name="@radix-ui/react-slot" version="^1.2.4" purpose="Button asChild prop support" />
        <package name="tailwindcss" version="^4" purpose="All styling via Tailwind classes" />
      </ecosystem>
      <ecosystem name="testing">
        <package name="vitest" version="^4.0.14" purpose="Unit test framework" />
        <package name="@testing-library/react" version="^16.3.0" purpose="Component testing utilities" />
        <package name="@playwright/test" version="^1.57.0" purpose="E2E and visual regression tests" />
      </ecosystem>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="architectural">No Breaking Changes: All existing functionality must continue to work identically</constraint>
    <constraint type="architectural">Component Library Preservation: Continue using shadcn/ui; extend, don't replace</constraint>
    <constraint type="architectural">Dark Mode Compatibility: All new styles must include dark mode variants</constraint>
    <constraint type="styling">Use explicit slate colors (border-slate-200, text-slate-700) instead of theme variables</constraint>
    <constraint type="styling">Base border-radius: rounded-lg (8px) for all button variants</constraint>
    <constraint type="styling">Transition: transition-colors (not transition-all) for performance</constraint>
    <constraint type="testing">Follow DR.4 pattern: ~20+ unit tests + E2E visual tests</constraint>
    <constraint type="scope">78 files use Button component - audit for custom className overrides</constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>buttonVariants</name>
      <kind>CVA function</kind>
      <signature>buttonVariants({ variant?, size?, className? }): string</signature>
      <path>src/components/ui/button.tsx</path>
    </interface>
    <interface>
      <name>Button component</name>
      <kind>React component</kind>
      <signature>Button({ className?, variant?, size?, asChild?, ...props }: ButtonProps)</signature>
      <path>src/components/ui/button.tsx</path>
    </interface>
    <interface>
      <name>Button variants</name>
      <kind>type definition</kind>
      <signature>variant: "default" | "destructive" | "outline" | "secondary" | "ghost" | "link"</signature>
      <path>src/components/ui/button.tsx</path>
    </interface>
    <interface>
      <name>Button sizes</name>
      <kind>type definition</kind>
      <signature>size: "default" | "sm" | "lg" | "icon" | "icon-sm" | "icon-lg"</signature>
      <path>src/components/ui/button.tsx</path>
    </interface>
  </interfaces>

  <tests>
    <standards>
      Use Vitest with @testing-library/react for unit tests. Follow DR.4 pattern with comprehensive variant testing.
      Test each button variant renders with correct Tailwind classes. Test dark mode variants are present.
      Use Playwright for E2E visual tests with screenshot comparison. Test hover states, focus states, disabled states.
      Minimum ~20 unit tests covering all variants and sizes. E2E tests for buttons on key pages (Documents, Settings, dialogs).
    </standards>
    <locations>
      <location>__tests__/components/ui/button.test.tsx (create)</location>
      <location>__tests__/e2e/button-consistency.spec.ts (create)</location>
    </locations>
    <ideas>
      <idea ac="DR.5.1">Test default variant renders with bg-primary, text-white, rounded-lg, hover:bg-primary/90</idea>
      <idea ac="DR.5.2">Test secondary variant renders with border-slate-200, text-slate-700, hover:bg-slate-50</idea>
      <idea ac="DR.5.2">Test outline variant matches secondary styling pattern</idea>
      <idea ac="DR.5.3">Test all button sizes include px-4 py-2 (or equivalent) text-sm font-medium</idea>
      <idea ac="DR.5.4">Test icon size renders with size-9 (default icon) and correct padding</idea>
      <idea ac="DR.5.4">Test icon buttons can have rounded-full via className override</idea>
      <idea ac="DR.5.5">Test all variants include transition-colors class</idea>
      <idea ac="DR.5.5">Test ghost variant renders with hover:bg-slate-100</idea>
      <idea ac="all">Test dark mode variants: dark:border-slate-700, dark:bg-slate-900, dark:hover:bg-slate-800</idea>
      <idea ac="all">E2E screenshot test for button states on Settings page (Save/Cancel buttons)</idea>
      <idea ac="all">E2E screenshot test for icon buttons in Header (bell, avatar)</idea>
      <idea ac="all">E2E test button styling in AlertDialog (confirm/cancel pattern)</idea>
    </ideas>
  </tests>
</story-context>
