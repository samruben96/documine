# Story 5.6: Conversation History & Follow-up Questions

## Table of Contents

- [Story 5.6: Conversation History & Follow-up Questions](#table-of-contents)
  - [Story](./story.md)
  - [Acceptance Criteria](./acceptance-criteria.md)
    - [AC-5.6.1: Conversation History Visible in Chat Panel](./acceptance-criteria.md#ac-561-conversation-history-visible-in-chat-panel)
    - [AC-5.6.2: Conversations Persisted to Database](./acceptance-criteria.md#ac-562-conversations-persisted-to-database)
    - [AC-5.6.3: Per-Document Conversations](./acceptance-criteria.md#ac-563-per-document-conversations)
    - [AC-5.6.4: Returning to Document Shows Previous Conversation](./acceptance-criteria.md#ac-564-returning-to-document-shows-previous-conversation)
    - [AC-5.6.5: Follow-up Questions Understand Context](./acceptance-criteria.md#ac-565-follow-up-questions-understand-context)
    - [AC-5.6.6: Last 10 Messages in RAG Prompt](./acceptance-criteria.md#ac-566-last-10-messages-in-rag-prompt)
    - [AC-5.6.7: New Chat Button Visible](./acceptance-criteria.md#ac-567-new-chat-button-visible)
    - [AC-5.6.8: New Chat Confirmation Dialog](./acceptance-criteria.md#ac-568-new-chat-confirmation-dialog)
    - [AC-5.6.9: New Chat Creates New Conversation](./acceptance-criteria.md#ac-569-new-chat-creates-new-conversation)
    - [AC-5.6.10: Old Conversations Not Deleted](./acceptance-criteria.md#ac-5610-old-conversations-not-deleted)
    - [AC-5.6.11: Error Handling for Database Operations](./acceptance-criteria.md#ac-5611-error-handling-for-database-operations)
    - [AC-5.6.12: Concurrent Access Handling](./acceptance-criteria.md#ac-5612-concurrent-access-handling)
  - [Tasks / Subtasks](./tasks-subtasks.md)
  - [Dev Notes](./dev-notes.md)
    - [Conversation Database Schema](./dev-notes.md#conversation-database-schema)
    - [Race Condition Handling Pattern](./dev-notes.md#race-condition-handling-pattern)
    - [Streaming Buffer Pattern for Message Persistence](./dev-notes.md#streaming-buffer-pattern-for-message-persistence)
    - [Token Budget Management](./dev-notes.md#token-budget-management)
    - [Chat Service Interface](./dev-notes.md#chat-service-interface)
    - [Updated API Contract](./dev-notes.md#updated-api-contract)
    - [RAG Prompt with History](./dev-notes.md#rag-prompt-with-history)
    - [Empty State Example Questions](./dev-notes.md#empty-state-example-questions)
    - [Analytics Events (Recommended)](./dev-notes.md#analytics-events-recommended)
    - [Project Structure Notes](./dev-notes.md#project-structure-notes)
    - [Learnings from Previous Story](./dev-notes.md#learnings-from-previous-story)
    - [References](./dev-notes.md#references)
  - [Dev Agent Record](./dev-agent-record.md)
    - [Context Reference](./dev-agent-record.md#context-reference)
    - [Agent Model Used](./dev-agent-record.md#agent-model-used)
    - [Debug Log References](./dev-agent-record.md#debug-log-references)
    - [Completion Notes List](./dev-agent-record.md#completion-notes-list)
    - [File List](./dev-agent-record.md#file-list)
  - [Code Review Notes](./code-review-notes.md)
  - [Change Log](./change-log.md)
