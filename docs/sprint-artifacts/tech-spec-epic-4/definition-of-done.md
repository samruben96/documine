# Definition of Done

## Story-Level DoD

- [ ] All acceptance criteria verified and passing
- [ ] TypeScript compiles without errors (`npm run build` succeeds)
- [ ] Unit tests written for new utility functions (Vitest)
- [ ] Integration tests for server actions
- [ ] Component tests for user interactions
- [ ] No console errors in browser during manual testing
- [ ] Responsive design verified at desktop, tablet, mobile breakpoints
- [ ] Loading states use skeleton/shimmer (no spinners > 200ms)
- [ ] Error states display user-friendly messages
- [ ] Code reviewed and approved
- [ ] Merged to main branch

## Epic-Level DoD

- [ ] All 8 stories complete and passing DoD (7 original + Story 4.8)
- [ ] All 73 acceptance criteria verified (63 original + 10 from Story 4.8)
- [ ] Database migration applied successfully
- [ ] Edge Function deployed and tested
- [ ] New environment variable (DOCLING_SERVICE_URL) documented and set
- [ ] Docling service deployed and accessible (local or production)
- [ ] New dependencies installed (react-dropzone, react-pdf, pdfjs-dist)
- [ ] Storage bucket configured with RLS policies
- [ ] End-to-end upload-to-ready flow tested with real PDF
- [ ] Cross-agency isolation verified (cannot see other agency docs)
- [ ] Build succeeds (`npm run build`)
- [ ] All tests pass (`npm run test`)
- [ ] Documentation updated if needed
- [ ] Sprint status updated to reflect epic completion

## FR Coverage Verification

| FR | Description | Stories | Status |
|----|-------------|---------|--------|
| FR8 | Upload PDF documents | 4.1, 4.2 | ◯ |
| FR9 | View document list | 4.3 | ◯ |
| FR10 | Delete documents | 4.4 | ◯ |
| FR11 | Organize/label documents | 4.5 | ◯ |
| FR12 | Process and index documents | 4.6, 4.7, **4.8** | ◯ |
| FR27 | Isolated agency data | 4.1 (storage path) | ◯ |
| FR33 | Processing queue | 4.7 | ◯ |

---

_Generated by BMAD Epic Tech Context Workflow_
_Date: 2025-11-28_
_Updated: 2025-11-30 (Story 4.8 - Docling Migration added)_
